---
name: Go K6 Load Test Scenario Slim
author: Andreas Weber <andreas.weber@qaware.de>
description: Simple Webservice accessing DB and (mocked) webservice. Built in go.
compose-file: !include docker-compose-slim.yaml

services:
  database-setup:
    # use sleep as entry point. If we directly pass migrate to the entrypoint flyway the container stops after execution
    entrypoint: sleep
    command: infinity
    # start flyway migrate explicitly
    setup-commands:
      - flyway migrate

flow:
  - name: Run Load Tests
    container: database-setup
    commands:
      - type: console
        command: sleep 60
        note: Run load test manually now
        read-notes-stdout: true
        log-stdout: true
        log-stderr: true

